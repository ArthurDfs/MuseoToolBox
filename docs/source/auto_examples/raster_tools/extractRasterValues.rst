.. note::
    :class: sphx-glr-download-link-note

    Click :ref:`here <sphx_glr_download_auto_examples_raster_tools_extractRasterValues.py>` to download the full example code
.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_examples_raster_tools_extractRasterValues.py:


Extract raster values from vector file
===============================================================

Easily extract raster values from vector files (polygon/point)

Import librairies
-------------------------------------------


.. code-block:: default


    import museotoolbox as mtb
    import numpy as np






Load HistoricalMap dataset
-------------------------------------------


.. code-block:: default


    raster,vector = mtb.datasets.historicalMap()







Extract raster values with no vector information
-------------------------------------------------


.. code-block:: default


    X = mtb.raster_tools.getSamplesFromROI(raster,vector)

    print("Vector contains {} pixels".format(X.shape[0]))
    print("Raster contains {} bands per pixel".format(X.shape[1]))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Vector contains 12647 pixels
    Raster contains 3 bands per pixel


Let's suppose you want konw to extract the label of each polygon/point


.. code-block:: default


    X,y = mtb.raster_tools.getSamplesFromROI(raster,vector,'class')
    uniqueLabels = np.unique(y,return_counts=True)

    for label,count in zip(*uniqueLabels):
        print('label {} has {} samples'.format(label,count))
    




.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    label 1 has 7542 samples
    label 2 has 2293 samples
    label 3 has 2279 samples
    label 4 has 525 samples
    label 5 has 8 samples


You can put as many fields as you want, except fields of string type


.. code-block:: default


    X,y,g = mtb.raster_tools.getSamplesFromROI(raster,vector,'class','uniquefid')
    print('There are a total of {} groups'.format(np.unique(g).size))



.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    There are a total of 17 groups



.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.529 seconds)


.. _sphx_glr_download_auto_examples_raster_tools_extractRasterValues.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download

     :download:`Download Python source code: extractRasterValues.py <extractRasterValues.py>`



  .. container:: sphx-glr-download

     :download:`Download Jupyter notebook: extractRasterValues.ipynb <extractRasterValues.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.readthedocs.io>`_
